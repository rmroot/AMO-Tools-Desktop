<div *ngIf="assessment && settings">
  <div class="hide-print" id="psatBanner">
    <app-psat-banner (togglePanel)="toggleOpenPanel($event)" [assessment]="assessment"></app-psat-banner>
  </div>
  <!--system-setup-->
  <div *ngIf="mainTab == 'system-setup'">
    <nav class="hide-print">
      <ul class="tabs subtabs progress-tabs">
        <li [ngClass]="{'active': subTab == 'system-basics'}">
          <a (click)="changeSubTab('system-basics')"><span class="step-number">1</span> Assessment Settings</a>
        </li>
        <li [ngClass]="{'active': subTab == 'pump-fluid'}">
          <a (click)="changeSubTab('pump-fluid')"><span class="step-number">2</span> Pump &amp; Fluid</a>
        </li>
        <li [ngClass]="{'active': subTab == 'motor', 'disabled': checkPumpFluid() }">
          <a (click)="changeSubTab('motor')"><span class="step-number">3</span> Motor</a>
        </li>
        <li [ngClass]="{'active': subTab == 'field-data', 'disabled': checkMotor()}">
          <a (click)="changeSubTab('field-data')"><span class="step-number">4</span> Field Data</a>
        </li>
      </ul>
    </nav>

    <div class="tab-content">
      <div class="wrapper">
        <div class="form">
          <app-system-basics *ngIf="subTab == 'system-basics'" [settings]="settings" [saveClicked]="saveClicked" [assessment]="assessment"
            [(psat)]="_psat" [isAssessmentSettings]="isAssessmentSettings" (updateSettings)="getSettings($event)" (updateAssessment)="save()"></app-system-basics>
          <app-pump-fluid *ngIf="subTab == 'pump-fluid'" (isValid)="setValid()" (isInvalid)="setInvalid()" [saveClicked]="saveClicked"
            [(psat)]="_psat" (saved)="save()" [selected]="true" [settings]="settings" [baseline]="true"></app-pump-fluid>
          <app-motor *ngIf="subTab == 'motor'" (isValid)="setValid()" (isInvalid)="setInvalid()" [saveClicked]="saveClicked" [(psat)]="_psat"
            (saved)="save()" [selected]="true" [settings]="settings" [baseline]="true"></app-motor>
          <app-field-data *ngIf="subTab == 'field-data'" (isValid)="setValid()" (isInvalid)="setInvalid()" [saveClicked]="saveClicked"
            [(psat)]="_psat" (saved)="save()" [selected]="true" [settings]="settings" [baseline]="true"></app-field-data>
        </div>
        <div class="help">
          <app-help-panel [psat]="_psat" [settings]="settings" [currentTab]="subTab"></app-help-panel>
        </div>
      </div>
    </div>

  </div>
  <!--End system-setup-->
  <!--tab (diagram and assessment)-->
  <div class="hide-print" id="psatTabs" *ngIf="mainTab != 'report' && mainTab != 'system-setup' && mainTab != 'diagram'">
    <app-psat-tabs></app-psat-tabs>
  </div>
  <!--end tabs-->
  <!--assessment-->
  <div class="tab-content" *ngIf="mainTab == 'assessment' && (currentTab == 'explore-opportunities' || currentTab == 'modify-conditions')">
    <app-explore-opportunities *ngIf="currentTab == 'explore-opportunities'" [assessment]="assessment" [settings]="settings"
      [saveClicked]="saveClicked" [(psat)]="_psat" (saved)="save()"></app-explore-opportunities>
    <app-modify-conditions *ngIf="currentTab == 'modify-conditions'" [assessment]="assessment" [settings]="settings" [saveClicked]="saveClicked"
      [(psat)]="_psat" (saved)="save()"></app-modify-conditions>
  </div>
  <div class="row justify-content-center" *ngIf="mainTab == 'assessment' && currentTab != 'explore-opportunities' && currentTab != 'modify-conditions'">
    <div class="col-10">
      <div class="card card-block calculator-card" style="margin-bottom: 10% !important;">
        <app-system-curve *ngIf="currentTab == 'system-curve'" [inPsat]="true" [psat]="_psat" [settings]="settings"></app-system-curve>
        <app-achievable-efficiency *ngIf="currentTab == 'achievable-efficiency'" [inPsat]="true" [settings]="settings" [psat]="_psat"></app-achievable-efficiency>
        <app-motor-performance *ngIf="currentTab == 'motor-performance'" [inPsat]="true" [psat]="_psat" [settings]="settings"></app-motor-performance>
        <app-nema-energy-efficiency *ngIf="currentTab == 'nema-energy-efficiency'" [inPsat]="true" [psat]="_psat" [settings]="settings"></app-nema-energy-efficiency>
        <app-specific-speed *ngIf="currentTab == 'specific-speed'" [settings]="settings" [inPsat]="true" [psat]="_psat"></app-specific-speed>
        <app-pump-curve *ngIf="currentTab == 'pump-curve'" [settings]="settings" [inPsat]="true" [psat]="_psat"></app-pump-curve>
      </div>
    </div>
  </div>
  <div class="tab-content" *ngIf="mainTab =='diagram'">
    <app-psat-diagram [psat]="_psat" [settings]="settings"></app-psat-diagram>
  </div>
  <!--end diagram-->
  <!--report-->
  <div class="row justify-content-center report-container" *ngIf="mainTab == 'report'">
    <div class="col-10 report-column">
      <app-psat-report [psat]="_psat" [settings]="settings" [assessment]="assessment" [inPsat]="true" (closeReport)="closeReport()"
        (exportData)="exportData()"></app-psat-report>
    </div>
  </div>
  <!--end report-->
  <!--footer-->
  <div id="psatFooter" class="footer hide-print" *ngIf="mainTab == 'system-setup' || mainTab == 'assessment'">
    <div class="pull-right">
      <button class="btn btn-secondary" *ngIf="mainTab == 'system-setup' || mainTab == 'assessment'" (click)="toggleSave()">Save</button>
      <button class="btn btn-primary" *ngIf="mainTab == 'system-setup'" [disabled]="!getCanContinue()" (click)="continue()">Continue</button>
    </div>
  </div>
  <!--end footer-->
</div>



<ng2-toasty></ng2-toasty>